version: '3.8'

services:
  api:
    build: ./services/api
    ports: ["8080:8080"]
    environment:
      - PROMPT_SERVICE_URL=http://prompt-engine:8001
      - FEEDBACK_SERVICE_URL=http://feedback-service:8002
      - ANALYTICS_SERVICE_URL=http://analytics-service:8003
      - SRS_SERVICE_URL=http://srs-service:8004
    depends_on:
      - prompt-engine
      - feedback-service
      - analytics-service
      - srs-service

  prompt-engine:
    build: ./services/prompt-engine
    ports: ["8001:8001"]

  feedback-service:
    build: ./services/feedback-service
    ports: ["8002:8002"]

  analytics-service:
    build: ./services/analytics-service
    ports: ["8003:8003"]

  srs-service:
    build: ./services/srs-service
    ports: ["8004:8004"]

  web:
    build: ./frontend/web
    ports: ["3000:3000"]
    depends_on: [api]
